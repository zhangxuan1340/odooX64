define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.browser.messages"],function(e,t,r,a){return webpackJsonp([2,3],{102:function(e,t,r){"use strict";function a(e,t,r,a,n,o){var s="";return i.default.each(i.default.sortBy(i.default.pick(t,n),function(e){return e.priority}),function(e){s=s+"/"+encodeURI(e._id)}),s=o?s+"/"+o:s+"/",""+e+a+"/"+r+s}var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n);e.exports={generate_url:a}},104:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.browserTreeState=t.pgBrowser=void 0;var i=r(1),o=a(i),s=r(0),l=a(s),d=r(4),u=a(d),c=r(2),f=(a(c),r(3)),p=a(f),g=p.default.Browser=p.default.Browser||{},b=g.browserTreeState=g.browserTreeState||{};o.default.extend(g.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function(){var e=g.get_preference("browser","browser_tree_state_save_interval");o.default.isUndefined(e)||-1===e.value||(setInterval(this.save_state,1e3*e.value),this.fetch_state.apply(this),g.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this),g.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this),g.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this))},save_state:function(){var e=g.browserTreeState;e.last_state!=JSON.stringify(e.current_state)&&l.default.ajax({url:(0,u.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(e.current_state)}).done(function(){e.last_state=JSON.stringify(e.current_state)}).fail(function(e){e.responseText;if(417==e.status||410==e.status||500==e.status)try{JSON.parse(e.responseText).errormsg}catch(e){}})},fetch_state:function(){var e=this;l.default.ajax({url:(0,u.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){e.stored_state=t}).fail(function(e){e.responseText;if(417==e.status||410==e.status||500==e.status)try{JSON.parse(e.responseText).errormsg}catch(e){}})},update_cache:function(e){var t=e&&g.tree.itemData(e),r=t&&g.Nodes[t._type],a=r.getTreeNodeHierarchy(e),n=void 0,i=g.tree.pathId(e),s=i.join(),l=[],d=-1;if(g.tree.hasParent(e)&&this.parent in a){if(n=a[this.parent]._id,g.tree.isOpen(e)){i.push(t.id),l=i.join(),n in this.current_state||(this.current_state[n]={paths:[],selected:{},conn_status:{},is_opened:{}});var u=o.default.find(this.current_state[n].paths,function(e){return-1!==e.search(l)});o.default.isUndefined(u)&&(o.default.isUndefined(this.current_state[n].paths)?this.current_state[n].paths=[]:d=this.current_state[n].paths.indexOf(s),-1!==d?this.current_state[n].paths[d]=l:this.current_state[n].paths.push(l))}this.update_database_status(e),this.update_current_selected_item(a)}},remove_from_cache:function(e){var t=this,r=t.stored_state||{},a=e&&g.tree.itemData(e),n=a&&g.Nodes[a._type],i=n&&n.getTreeNodeHierarchy(e);if(g.tree.hasParent(e)&&t.parent in i){var s=i&&i[t.parent]._id,l=i&&i[t.orig_parent].id;if(this.update_database_status(e),a._type==t.parent||"database"==a._type)return void(s in r&&"paths"in r[s]&&(r[s].paths=t.current_state[s].paths,t.save_state()));if(g.tree.isClosed(e)){var d=t.current_state[s].paths,u=void 0;if("database"in i&&(u=i.database.id),!o.default.isUndefined(d)&&!o.default.isUndefined(d.length)){var c=0,f=void 0;o.default.each(d,function(e){if(!o.default.isUndefined(e)){var r=e.split(",");if(-1!==r.indexOf(a.id)&&(void 0===u||void 0!==u&&-1!==r.indexOf(u))){var n=r.indexOf(a.id);r.splice(n),f=r.join(),f==l?t.current_state[s].paths.splice(e,1):t.current_state[s].paths[c]=f}c++}})}}}},expand_from_previous_state:function(e){var t=this,r=t.stored_state||{},a=e&&g.tree.itemData(e),i=a&&g.Nodes[a._type],s=i&&i.getTreeNodeHierarchy(e);if(g.tree.hasParent(e)&&t.parent in s&&(a._type!=t.parent||!1!==g.tree.isOpen(e))){var l=r[s[t.parent]._id];if(!("database"==a._type&&l&&"conn_status"in l&&"is_opened"in l)||0!==l.conn_status[a.id]&&0!==l.is_opened[a.id]&&a.id in l.is_opened){if(!o.default.isUndefined(l)&&"paths"in l&&!o.default.isUndefined(l.paths.length)){var d=[].concat(n(l.paths)),u=void 0;"database"in s&&(u=s.database.id),o.default.each(d,function(n){if(!o.default.isUndefined(n)){var i=n.split(",");if(-1!==i.indexOf(a.id)&&(void 0===u||void 0!==u&&-1!==i.indexOf(u))){var l=i.indexOf(a.id);if(g.tree.toggle(e),l==i.length-1){var d=r[s[t.parent]._id].paths.indexOf(n);r[s[t.parent]._id].paths.splice(d,1)}}}})}this.select_tree_item(e)}}},update_database_status:function(e){var t=e&&g.tree.itemData(e),r=t&&g.Nodes[t._type],a=r.getTreeNodeHierarchy(e);if("database"in a){var n=a.database.id,i=a&&a[this.parent]._id;i in this.current_state&&"selected"in this.current_state[i]&&(a.database.connected?this.current_state[i].conn_status[n]=1:this.current_state[i].conn_status[n]=0,"database"==t._type&&(g.tree.isOpen(e)?this.current_state[i].is_opened[n]=1:this.current_state[i].is_opened[n]=0))}},update_current_selected_item:function(e){if(this.parent in e){var t=e&&e[this.parent]._id,r=g.tree.itemData(g.tree.selected()),a=void 0;r=r?r.id:void 0,"database"in e&&(a=e.database.id),t in this.current_state&&"selected"in this.current_state[t]&&!o.default.isUndefined(r)&&(this.current_state[t].selected[e[this.parent].id]=r,o.default.isUndefined(a)||(this.current_state[t].selected[a]=r))}},select_tree_item:function(e){var t=this.stored_state||{},r=e&&g.tree.itemData(e),a=r&&g.Nodes[r._type],n=a&&a.getTreeNodeHierarchy(e),i=t[n[this.parent]._id];if("database"in n){var o=n.database.id;i&&"selected"in i&&o in i.selected&&i.selected[o]==r.id&&g.tree.select(e)}}}),t.pgBrowser=g,t.browserTreeState=b},105:function(e,t,r){"use strict";var a,n;a=[r(2),r(4),r(0),r(1),r(10),r(11),r(3),r(5),r(13),r(24)],void 0!==(n=function(e,t,r,a,n,i,o,s,l){var d=window.wcDocker,u=function(e){var t=e.get("type");if(-1!=t.indexOf("[]")){switch(t.replace("[]","")){case"boolean":return l.Extension.InputBooleanArrayCell;case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return l.Extension.InputIntegerArrayCell;case"real":case"numeric":case"double precision":case"decimal":return l.Extension.InputNumberArrayCell;default:return l.Extension.InputStringArrayCell}}else switch(t){case"boolean":return l.BooleanCell.extend({formatter:l.BooleanCellFormatter});case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return void 0!=e.get("value")&&e.set({value:parseInt(e.get("value"))},{silent:!0}),l.IntegerCell;case"real":case"numeric":case"double precision":case"decimal":return void 0!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),l.NumberCell;case"string":return l.StringCell;case"date":return l.DateCell;default:return l.Cell}},c=function(e){return-1!=e.get("type").indexOf("[]")?l.StringCell:l.BooleanCell},f=n.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(a.isUndefined(this.get("value"))||a.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var t=e("Please enter a value for the parameter.");return this.errorModel.set("value",t),t}return this.errorModel.unset("value"),null}}),p=n.Collection.extend({model:f}),g=function(e){return e instanceof n.Model&&e.get("use_default")},b=function(e){if(e instanceof n.Model){return-1==e.get("type").indexOf("[]")}};return function(n,o,f){i.debuggerInputArgsDialog||i.dialog("debuggerInputArgsDialog",function(){return{main:function(n,o,d,f){this.preferences=window.top.pgAdmin.Browser.get_preferences_for_module("debugger"),this.set("title",n),this.set("debug_info",o),this.set("restart_debug",d);var _=this.func_args_data=[];if(0==d){var h=s.tree,m=h.selected(),v=m&&1==m.length?h.itemData(m):void 0,y=v&&s.Nodes[v._type];if(!v)return;var w,k=y.getTreeNodeHierarchy.apply(y,[m]);"function"==v._type?w=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.function._id}):"procedure"==v._type?w=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.procedure._id}):"edbfunc"==v._type?w=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.edbfunc._id}):"edbproc"==v._type&&(w=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.edbproc._id}))}else w=t("debugger.get_arguments",{sid:o.server_id,did:o.database_id,scid:o.schema_id,func_id:o.function_id});r.ajax({url:w,method:"GET",async:!1}).done(function(e){if(0!=e.data.args_count)for(m=0;m<e.data.result.length;m++)_.push({arg_id:e.data.result[m].arg_id,is_null:e.data.result[m].is_null,is_expression:e.data.result[m].is_expression,use_default:e.data.result[m].use_default,value:e.data.result[m].value})}).fail(function(){i.alert(e("Debugger Error"),e("Unable to fetch the arguments from server"))});var D,x,C,N,S,T,E,B=l.HeaderCell.extend({className:"width_percent_25"}),M=[],P=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"is_null",label:e("Null?"),type:"boolean",cell:"boolean"},{name:"expr",label:e("Expression?"),type:"boolean",cellFunction:c,editable:b},{name:"value",label:e("Value"),type:"text",editable:!0,cellFunction:u,headerCell:B},{name:"use_default",label:e("Use Default?"),type:"boolean",cell:"boolean",editable:g},{name:"default_value",label:e("Default value"),type:"text",editable:!1,cell:"string"}],A=[],O=[],I=this.input_arg_id=[];if(null!=o.proargmodes){var j=o.proargmodes.split(",");for(E=0;E<j.length;E++)("i"==j[E]||"b"==j[E]||f&&"o"==j[E])&&I.push(E)}else{var V=o.proargtypenames.split(",");for(E=0;E<V.length;E++)I.push(E)}x=o.proargtypenames.split(","),null!=o.proargmodes&&(C=o.proargmodes.split(",")),o.pronargdefaults&&(N=o.pronargdefaults,S=o.proargdefaults.split(","),T=N);var q,F,L,K,R;if(null!=o.proargnames){for(D=o.proargnames.split(","),R=D.length-1;R>=0;R--)null!=o.proargmodes?("i"==C[R]||"b"==C[R]||f&&"o"==C[R])&&(T?(T-=1,M[R]=S[T]):M[R]="<No default value>"):T?(T-=1,M[R]=S[T]):M[R]="<No default value>";if(0!=x.length)for(m=0;m<x.length;m++)null!=o.proargmodes?("i"==C[m]||"b"==C[m]||f&&"o"==C[m])&&(K=!1,"<No default value>"!=M[m]&&(K=!0),A.push({name:D[m],type:x[m],use_default:K,default_value:M[m]})):(K=!1,"<No default value>"!=M[m]&&(K=!0),A.push({name:D[m],type:x[m],use_default:K,default_value:M[m]}));if(0!=_.length)for(m=0;m<_.length;m++)(null==o.proargmodes||"o"!=C[m]||f)&&(L=_[m].arg_id,F=[],-1!=x[L].indexOf("[]")?(q=_[m].value.split(","),a.each(q,function(e){F.push({value:e})})):F=_[m].value,O.push({name:D[L],type:x[L],is_null:!!_[m].is_null,expr:!!_[m].is_expression,value:F,use_default:!!_[m].use_default,default_value:M[L]}))}else{var $=[];for(m=0;m<x.length;m++)$[m]="dbgparam"+(m+1);if(o.pronargdefaults){for(R=$.length-1;R>=0;R--)o.proargmodes,T?(T-=1,M[R]=S[T]):M[R]="<No default value>";for(m=0;m<x.length;m++)null==o.proargmodes?(K=!1,"<No default value>"!=M[m]&&(K=!0),A.push({name:$[m],type:x[m],use_default:K,default_value:M[m]})):("i"==C[m]||"b"==C[m]||f&&"o"==C[m])&&(K=!1,"<No default value>"!=M[m]&&(K=!0),A.push({name:$[m],type:x[m],use_default:K,default_value:M[m]}))}else for(m=0;m<x.length;m++)A.push({name:$[m],type:x[m],use_default:!1,default_value:"<No default value>"}),M[m]="<No default value>";if(0!=_.length)for(m=0;m<_.length;m++)L=_[m].arg_id,F=[],-1!=x[L].indexOf("[]")?(q=_[m].value.split(","),a.each(q,function(e){F.push({value:e})})):F=_[m].value,O.push({name:$[L],type:x[L],is_null:!!_[m].is_null,expr:!!_[m].is_expression,value:F,use_default:!!_[m].use_default,default_value:M[L]})}0==_.length?this.debuggerInputArgsColl=new p(A):this.debuggerInputArgsColl=new p(O),this.grid&&(this.grid.remove(),this.grid=null);var G=this.grid=new l.Grid({columns:P,collection:this.debuggerInputArgsColl,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});G.render(),r(this.elements.content).html(G.el);var U=r(G.el).find("input:checkbox").first();U.length&&setTimeout(function(){U.trigger("click")},250)},settings:{debug_info:void 0,restart_debug:void 0},setup:function(){return{buttons:[{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:e("Debug"),key:13,className:"btn btn-primary fa fa-bug pg-alertify-button"}],options:{padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}},callback:function(a){if(a.button.text===e("Debug")){var n=this;if(0==n.setting("restart_debug")){var o=s.tree,l=o.selected(),u=l&&1==l.length?o.itemData(l):void 0,c=u&&s.Nodes[u._type];if(!u)return;var f=c.getTreeNodeHierarchy.apply(c,[l])}var p=[],g=this.sqlite_func_args_list=[],b=0;this.grid.collection.each(function(e){if(e.get("is_null")?p.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?p.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):p.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==n.setting("restart_debug")){var t;"function"==u._type?t=f.function._id:"procedure"==u._type?t=f.procedure._id:"edbfunc"==u._type?t=f.edbfunc._id:"edbproc"==u._type&&(t=f.edbproc._id),g.push({server_id:f.server._id,database_id:f.database._id,schema_id:f.schema._id,function_id:t,arg_id:n.input_arg_id[b],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})}else g.push({server_id:n.setting("debug_info").server_id,database_id:n.setting("debug_info").database_id,schema_id:n.setting("debug_info").schema_id,function_id:n.setting("debug_info").function_id,arg_id:n.input_arg_id[b],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});b+=1});var _;if(0==n.setting("restart_debug"))"function"==u._type?_=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:f.server._id,did:f.database._id,scid:f.schema._id,func_id:f.function._id}):"procedure"==u._type?_=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:f.server._id,did:f.database._id,scid:f.schema._id,func_id:f.procedure._id}):"edbfunc"==u._type?_=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:f.server._id,did:f.database._id,scid:f.schema._id,func_id:f.edbfunc._id}):"edbproc"==u._type&&(_=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:f.server._id,did:f.database._id,scid:f.schema._id,func_id:f.edbproc._id})),r.ajax({url:_,method:"POST",data:{data:JSON.stringify(p)}}).done(function(a){var o=t("debugger.direct",{trans_id:a.data.debuggerTransId});if(n.preferences.debugger_new_browser_tab)window.open(o,"_blank");else{s.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(o)});var l=s.docker.findPanels("properties"),c=s.docker.addPanel("frm_debugger",d.DOCK.STACKED,l[0]);c.focus(),c.on(d.EVENT.CLOSED,function(){var e=t("debugger.close",{trans_id:a.data.debuggerTransId});r.ajax({url:e,method:"DELETE"})})}var p;"function"==u._type?p=t("debugger.set_arguments",{sid:f.server._id,did:f.database._id,scid:f.schema._id,func_id:f.function._id}):"procedure"==u._type?p=t("debugger.set_arguments",{sid:f.server._id,did:f.database._id,scid:f.schema._id,func_id:f.procedure._id}):"edbfunc"==u._type?p=t("debugger.set_arguments",{sid:f.server._id,did:f.database._id,scid:f.schema._id,func_id:f.edbfunc._id}):"edbproc"==u._type&&(p=t("debugger.set_arguments",{sid:f.server._id,did:f.database._id,scid:f.schema._id,func_id:f.edbproc._id})),r.ajax({url:p,method:"POST",data:{data:JSON.stringify(g)}}).done(function(){}).fail(function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))})}).fail(function(t){i.alert(e("Debugger Target Initialization Error"),t.responseJSON.errormsg)});else{_=t("debugger.start_listener",{trans_id:n.setting("debug_info").trans_id}),r.ajax({url:_,method:"POST",data:{data:JSON.stringify(p)}}).done(function(){}).fail(function(t){i.alert(e("Debugger Listener Startup Error"),t.responseJSON.errormsg)});var h=t("debugger.set_arguments",{sid:n.setting("debug_info").server_id,did:n.setting("debug_info").database_id,scid:n.setting("debug_info").schema_id,func_id:n.setting("debug_info").function_id});r.ajax({url:h,method:"POST",data:{data:JSON.stringify(g)}}).done(function(){}).fail(function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))})}return!0}if(a.button.text===e("Cancel"))return!1},build:function(){i.pgDialogBuild.apply(this)},prepare:function(){r(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),0==this.func_args_data.length?this.__internal.buttons[1].element.disabled=!0:this.__internal.buttons[1].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",function(e){return function(){for(var t=!1,r=0;r<this.collection.length;r++)if(this.collection.models[r].get("is_null"))e.__internal.buttons[1].element.disabled=!1,t=!0;else if(null==this.collection.models[r].get("value")||void 0==this.collection.models[r].get("value")){if(t=!0,!this.collection.models[r].get("use_default")){e.__internal.buttons[1].element.disabled=!0;break}e.__internal.buttons[1].element.disabled=!1}t||(e.__internal.buttons[1].element.disabled=!1)}}(this)),this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:error",function(e){return function(){e.__internal.buttons[1].element.disabled=!0}}(this))}}}),i.debuggerInputArgsDialog(e("Debugger"),n,o,f).resizeTo(s.stdW.md,s.stdH.md)}}.apply(t,a))&&(e.exports=n)},106:function(e,t,r){"use strict";function a(e,t){if(t){9!==(t.which||t.keyCode)&&e.focus()}}function n(e){var t=void 0;return e&&(e.procedure&&e.procedure._id?t=e.procedure._id:e.edbproc&&e.edbproc._id&&(t=e.edbproc._id)),t}e.exports={setFocusToDebuggerEditor:a,getProcedureId:n}},162:function(e,t,r){"use strict";var a,n;a=[r(0),r(1),r(8)],void 0!==(n=function(e,t,r){return function(e,a){if(t.isUndefined(a)||t.isNull(a))return!0;r.startsWith(a,"coll-")&&(a=a.replace("coll-",""));var n=["server_group","server","catalog_object_column"];if(t.indexOf(n,a)>=0)return!0;var i=e.get_preference("browser","show_node_"+a);return!i||i.value}}.apply(t,a))&&(e.exports=n)},163:function(e,t,r){"use strict";(function(e){function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var i=r(3),o=n(i),s=r(4),l=n(s),d=r(52),u=a(d),c=r(0),f=n(c),p=r(11),g=a(p),b=r(30),_=a(b),h=o.default.Browser=o.default.Browser||{};e.extend(h,{preferences_cache:[],prefcache_version:0,generate_preference_version:function(){return(new Date).getTime()},preference_version:function(e){if(!e)return this.prefcache_version;this.prefcache_version=e},get_preference:function(t,r){var a=this;if(0!=e.size(a.preferences_cache))return e.findWhere(a.preferences_cache,{module:t,name:r});var n=function(){if(a.preferences_cache.length>0)return clearInterval(i),e.findWhere(a.preferences_cache,{module:t,name:r})},i=setInterval(n,1e3)},get_preferences_for_module:function(t){var r=this,a={};if(e.each(e.where(r.preferences_cache,{module:t}),function(e){a[e.name]=e.value}),Object.keys(a).length>0)return a},get_preference_for_id:function(t){var r=this;return e.findWhere(r.preferences_cache,{id:t})},cache_preferences:function(t){var r=this;setTimeout(function(){f.default.ajax({url:(0,l.default)("preferences.get_all")}).done(function(a){r.preferences_cache=a,r.preference_version(r.generate_preference_version()),h.keyboardNavigation.init(),h.tree&&(u.modifyAcitreeAnimation(r),u.modifyAlertifyAnimation(r)),h.browserTreeState.init(),t&&("string"==typeof t?f.default.event.trigger("prefchange:"+t):e.each(t,function(e,t){f.default.event.trigger("prefchange:"+t)}))}).fail(function(e,t,r){g.pgRespErrorNotify(e,r)})},500)},reflectPreferences:function(e){var t=this;if("sqleditor"===e||null===e||void 0===e){var r=t.get_preferences_for_module("sqleditor");(0,f.default)(t.editor.getWrapperElement()).css("font-size",_.calcFontSize(r.sql_font_size)),t.editor.setOption("tabSize",r.tab_size),t.editor.setOption("lineWrapping",r.wrap_code),t.editor.setOption("autoCloseBrackets",r.insert_pair_brackets),t.editor.setOption("matchBrackets",r.brace_matching),t.editor.refresh()}},onPreferencesChange:function(e,t){window.parent.$(parent.document).on("prefchange:"+e,function(e){null===window.top?window.$(document).off(e):t(e)})}}),t.pgBrowser=h}).call(t,r(1))},164:function(e,t){e.exports=a},165:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var n=r(1),i=a(n),o=r(3),s=a(o),l=r(0),d=a(l),u=r(58),c=a(u),f=r(18),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(f),g=r(77),b=a(g),_=r(34),h=a(_),m=s.default.Browser=s.default.Browser||{};m.keyboardNavigation=m.keyboardNavigation||{},i.default.extend(m.keyboardNavigation,{init:function(){c.default.reset(),m.preferences_cache.length>0&&(this.keyboardShortcut={file_shortcut:p.parseShortcutValue(m.get_preference("browser","main_menu_file").value),object_shortcut:p.parseShortcutValue(m.get_preference("browser","main_menu_object").value),tools_shortcut:p.parseShortcutValue(m.get_preference("browser","main_menu_tools").value),help_shortcut:p.parseShortcutValue(m.get_preference("browser","main_menu_help").value),left_tree_shortcut:p.parseShortcutValue(m.get_preference("browser","browser_tree").value),tabbed_panel_backward:p.parseShortcutValue(m.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:p.parseShortcutValue(m.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:p.parseShortcutValue(m.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:p.parseShortcutValue(m.get_preference("browser","sub_menu_view_data").value),sub_menu_properties:p.parseShortcutValue(m.get_preference("browser","sub_menu_properties").value),sub_menu_create:p.parseShortcutValue(m.get_preference("browser","sub_menu_create").value),sub_menu_delete:p.parseShortcutValue(m.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:p.parseShortcutValue(m.get_preference("browser","sub_menu_refresh").value),context_menu:p.parseShortcutValue(m.get_preference("browser","context_menu").value),direct_debugging:p.parseShortcutValue(m.get_preference("browser","direct_debugging").value),drop_multiple_objects:p.parseShortcutValue(m.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:p.parseShortcutValue(m.get_preference("browser","grid_menu_drop_cascade_multiple").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects}},this.bindShortcuts())},bindShortcuts:function(){var e=this;i.default.each(e.shortcutMethods,function(t,r){e._bindWithMousetrap(t.shortcuts,e[r],t.bindElem)});(0,d.default)(".pg-navbar").on("keydown",function(t){switch(t.keyCode){case 37:e.bindMainMenuLeft(t);break;case 38:e.bindMainMenuUpDown(t,"up");break;case 39:e.bindMainMenuRight(t);break;case 40:e.bindMainMenuUpDown(t,"down")}})},_bindWithMousetrap:function(e,t,r){var a=this;if(c.default.unbind(e),r){var n=document.querySelector(r);(0,c.default)(n).bind(e,function(){t.apply(this,arguments)}.bind(n))}else c.default.bind(e,function(){t.apply(a,arguments)})},unbindShortcuts:function(){var e=this;i.default.each(e.mousetrapInstances,function(e){e.instance.reset()}),e.mousetrapInstances=[]},bindMainMenu:function(e,t){var r=this.keyboardShortcut;t===r.file_shortcut&&(0,d.default)("#mnu_file a.dropdown-toggle").dropdown("toggle"),t===r.object_shortcut&&(0,d.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t===r.tools_shortcut&&(0,d.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t===r.help_shortcut&&(0,d.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(e,t){var r=s.default.Browser.docker.findPanels(),a=0,n=r.length,o=0,l=!1,d=this.keyboardShortcut;i.default.each(s.default.Browser.docker.findPanels(),function(e,t){e.isVisible()&&!l&&"browser"!==e._type&&(o=t,l=!0)}),t===d.tabbed_panel_backward?a=o>0?o-1:1:t===d.tabbed_panel_forward&&(a=o<n?o+1:n),s.default.Browser.docker.findPanels()[a].focus(),setTimeout(function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()},1e3)},bindMainMenuLeft:function(e){if((0,d.default)(e.target).hasClass("nav-link")){var t=(0,d.default)(e.target).closest(".nav-item");for(h.default._stopEventPropagation(e),t=t.prev(".nav-item");t.hasClass("d-none");)t=t.prev(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,d.default)(e.target).closest(".dropdown-menu").length>0){var r=(0,d.default)(e.target).closest("li");h.default._stopEventPropagation(e);var a=r.closest(".dropdown-menu");a.closest(".dropdown-submenu").length>0&&(a.removeClass("show"),a.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible"),r=a.closest(".dropdown-submenu"),r.find(".dropdown-item").trigger("focus"))}},bindMainMenuRight:function(e){if((0,d.default)(e.target).hasClass("nav-link")){var t=(0,d.default)(e.target).closest(".nav-item");for(h.default._stopEventPropagation(e),t=t.next(".nav-item");t.hasClass("d-none");)t=t.next(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,d.default)(e.target).closest(".dropdown-menu").length>0){var r=(0,d.default)(e.target).closest("li");h.default._stopEventPropagation(e),r.hasClass("dropdown-submenu")&&(r.addClass("dropdown-submenu-visible"),r.find(".dropdown-menu").addClass("show"),r=r.find(".dropdown-menu .dropdown-item").first().trigger("focus"))}},bindMainMenuUpDown:function(e,t){if((0,d.default)(e.target).closest(".dropdown-menu").length>0){h.default._stopEventPropagation(e);var r=(0,d.default)(e.target).closest("li"),a=(0,d.default)(e.target).closest(".dropdown-menu");for(a.find(".show").removeClass("show"),a.find(".dropdown-submenu").removeClass("dropdown-submenu-visible"),"up"===t?r=r.prev():"down"===t&&(r=r.next());r.hasClass("dropdown-divider")||r.find(".dropdown-item").first().hasClass("disabled");)"up"===t?r=r.prev():"down"===t&&(r=r.next());r.find(".dropdown-item").trigger("focus")}},bindLeftTree:function(){var e=this.getTreeDetails();(0,d.default)("#tree").trigger("focus"),e.t.focus(e.i),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&s.default.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&s.default.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&!0!==s.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&s.default.Browser.Node.callbacks.show_obj_properties.call(s.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails();e.d&&!0!==s.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&s.default.Browser.Node.callbacks.show_obj_properties.call(s.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"create"})},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&!0!==s.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&s.default.Browser.Node.callbacks.delete_obj.call(s.default.Browser.Nodes[e.t.itemData(e.i)._type])},bindSubMenuRefresh:function(e){e.preventDefault();var t=m.keyboardNavigation.getTreeDetails();s.default.Browser.Node.callbacks.refresh.call(s.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),r=(0,d.default)(e.srcElement).find(".aciTreeEntry").position().left+70,a=(0,d.default)(e.srcElement).find(".aciTreeEntry").position().top+70;t.t.blur(t.i),(0,d.default)("#tree").trigger("blur"),t.i.children().contextMenu({x:r,y:a})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!==t&&"procedure"!==t||s.default.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&s.default.Tools.Debugger.get_function_information(s.default.Browser.Nodes[t])},bindDropMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,d.default)("button.delete_multiple").length>0&&(0,d.default)("button.delete_multiple").click()},bindDropCascadeMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,d.default)("button.delete_multiple_cascade").length>0&&(0,d.default)("button.delete_multiple_cascade").click()},isPropertyPanelVisible:function(){var e=!1;return i.default.each(s.default.Browser.docker.findPanels(),function(t){"properties"===t._type&&(e=t.isVisible())}),e},getTreeDetails:function(){var e=s.default.Browser.tree,t=e.selected().length>0?e.selected():e.first();return{t:e,i:t,d:t&&1===t.length?e.itemData(t):void 0}},getDialogTabNavigator:function(e){var t=m.get_preference("browser","dialog_tab_backward").value,r=m.get_preference("browser","dialog_tab_forward").value;return new b.default.dialogTabNavigator(e,t,r)}}),e.exports=s.default.Browser.keyboardNavigation},167:function(e,t,r){"use strict";var a,n;a=[r(2),r(4),r(0),r(1),r(11),r(3),r(5),r(10),r(13),r(6),r(29),r(105),r(34),r(106),r(24)],void 0!==(n=function(e,t,r,a,n,i,o,s,l,d,u,c,f,p){var g=u.default,b=window.wcDocker;null!=i.Browser.tree&&(i=i||window.pgAdmin||{});var _=i.Tools=i.Tools||{};if(_.DirectDebug)return _.DirectDebug;var h=new function(){};a.extend(h,s.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},set_breakpoint:function(a,i,o){var s=t("debugger.set_breakpoint",{trans_id:a,line_no:i,set_type:o});r.ajax({url:s,method:"GET"}).done(function(e){e.data.status}).fail(function(){n.alert(e("Debugger Error"),e("Error while setting debugging breakpoint."))})},UpdateBreakpoint:function(e){var t=this,r=t.GetBreakpointInformation(e);if(1!=r.length||-1!=r[0].linenumber){for(var a=new Array,n=0;n<r.length;n++)-1!=r[n].linenumber&&a.push(r[n].linenumber);for(n=0;n<a.length;n++){void 0!=_.DirectDebug.editor.lineInfo(a[n]-1).gutterMarkers?_.DirectDebug.editor.setGutterMarker(a[n]-1,"breakpoints",null):_.DirectDebug.editor.setGutterMarker(a[n]-1,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}}},GetBreakpointInformation:function(a){var i="",o=t("debugger.execute_query",{trans_id:a,query_type:"get_breakpoints"});return r.ajax({url:o,method:"GET",async:!1}).done(function(t){"Success"===t.data.status?i=t.data.result:"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))}),i},setActiveLine:function(e){var t=this,r=_.DirectDebug.editor;e&&t.active_line_no&&r.removeLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),!e&&t.active_line_no&&(e=t.active_line_no),e>0&&(t.active_line_no=e,r.addLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),r.centerOnLine(t.active_line_no))},start_execution:function(a,i){var o=this,s=t("debugger.start_execution",{trans_id:a,port_num:i});r.ajax({url:s,method:"GET"}).done(function(t){"Success"===t.data.status?o.execute_query(a):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while starting debugging session."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while starting debugging session."))})},execute_query:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"wait_for_breakpoint"});r.ajax({url:o,method:"GET"}).done(function(t){"Success"===t.data.status?(null!=t.data.result[0].src&&null!=t.data.result[0].linenumber&&(_.DirectDebug.editor.setValue(t.data.result[0].src),i.setActiveLine(t.data.result[0].linenumber-2)),i.GetStackInformation(a),_.DirectDebug.debug_type&&i.poll_end_execution_result(a)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while executing requested debugging information."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while executing requested debugging information."))})},GetLocalVariables:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"get_variables"});r.ajax({url:o,method:"GET"}).done(function(t){"Success"===t.data.status?(i.AddLocalVariables(t.data.result),i.AddParameters(t.data.result),_.DirectDebug.debug_restarted&&(_.DirectDebug.debug_type&&i.poll_end_execution_result(a),_.DirectDebug.debug_restarted=!1)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while fetching variable information."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while fetching variable information."))})},GetStackInformation:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"get_stack_info"});r.ajax({url:o,method:"GET"}).done(function(t){"Success"===t.data.status?(i.AddStackInformation(t.data.result),i.GetLocalVariables(_.DirectDebug.trans_id)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while fetching stack information."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while fetching stack information."))})},poll_result:function(a){var i=this;if(_.DirectDebug.is_polling_required){var o,s=t("debugger.poll_result",{trans_id:a});o=_.DirectDebug.polling_timeout_idle?1e3:200,setTimeout(function(){r.ajax({url:s,method:"GET",beforeSend:function(){r(".debugger-container").addClass("show_progress")}}).done(function(t){r(".debugger-container").removeClass("show_progress"),"Success"===t.data.status?null==t.data.result||0==t.data.result.length?i.poll_result(a):(void 0!=t.data.result[0].src||null!=t.data.result[0].src?(_.DirectDebug.polling_timeout_idle=!1,_.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=_.DirectDebug.editor.getValue()&&(_.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(a)),i.setActiveLine(t.data.result[0].linenumber-2),i.GetStackInformation(a)):_.DirectDebug.debug_type||_.DirectDebug.first_time_indirect_debug?(_.DirectDebug.polling_timeout_idle=!1,_.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=_.DirectDebug.editor.getValue()&&(_.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(a)),i.setActiveLine(t.data.result[0].linenumber-2),i.GetStackInformation(a)):(_.DirectDebug.docker.finishLoading(50),i.setActiveLine(-1),i.clear_all_breakpoint(a),i.execute_query(a),_.DirectDebug.first_time_indirect_debug=!0,_.DirectDebug.polling_timeout_idle=!1),setTimeout(function(){i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("continue",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0)},500)):"Busy"===t.data.status?(_.DirectDebug.polling_timeout_idle=!0,_.DirectDebug.debug_type?i.poll_result(a):(_.DirectDebug.docker.startLoading(e("Waiting for another session to invoke the target...")),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("continue",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),_.DirectDebug.first_time_indirect_debug=!1,i.poll_result(a))):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while polling result."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while polling result."))})},o)}},update_messages:function(e){e=a.escape(e);var t="",r="";t=_.DirectDebug.messages_panel.$container.find(".messages").html(),r=t?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,_.DirectDebug.messages_panel.$container.find(".messages").html(r)},poll_end_execution_result:function(a){var i=this;if(_.DirectDebug.is_polling_required){var o,s=t("debugger.poll_end_execution_result",{trans_id:a});o=_.DirectDebug.polling_timeout_idle?1200:250,setTimeout(function(){r.ajax({url:s,method:"GET"}).done(function(t){"Success"===t.data.status?void 0==t.data.result?(i.setActiveLine(-1),_.DirectDebug.direct_execution_completed=!0,_.DirectDebug.polling_timeout_idle=!0,n.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),setTimeout(function(){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0)},500),_.DirectDebug.is_polling_required=!1):null!=t.data.result&&(i.setActiveLine(-1),i.AddResults(t.data.col_info,t.data.result),_.DirectDebug.results_panel.focus(),_.DirectDebug.direct_execution_completed=!0,_.DirectDebug.polling_timeout_idle=!0,n.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),setTimeout(function(){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0)},500),_.DirectDebug.is_polling_required=!1):"Busy"===t.data.status?(i.poll_end_execution_result(a),t.data.status_message&&i.update_messages(t.data.status_message)):"NotConnected"===t.data.status?n.alert(e("Debugger poll end execution error"),t.data.result):"ERROR"===t.data.status&&(_.DirectDebug.direct_execution_completed=!0,i.setActiveLine(-1),_.DirectDebug.is_user_aborted_debugging||n.error(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),_.DirectDebug.messages_panel.focus(),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),_.DirectDebug.is_user_aborted_debugging||(i.enable("continue",!0),_.DirectDebug.is_user_aborted_debugging=!1),_.DirectDebug.is_polling_required=!1)}).fail(function(){n.alert(e("Debugger Error"),e("Error while polling result."))})},o)}},Restart:function(a){var i=this,o=t("debugger.restart",{trans_id:a});i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1),_.DirectDebug.messages_panel.$container.find(".messages").html(""),r.ajax({url:o}).done(function(o){var s=o.data.restart_debug?1:0;if(_.DirectDebug.polling_timeout_idle=!1,_.DirectDebug.is_polling_required=!0,i.poll_result(a),s&&(_.DirectDebug.debug_restarted=!0),o.data.result.require_input)c(o.data.result,s);else{var l=t("debugger.start_listener",{trans_id:a});r.ajax({url:l,method:"GET"}).done(function(){_.DirectDebug.debug_type&&i.poll_end_execution_result(a)}).fail(function(){n.alert(e("Debugger Error"),e("Error while polling result."))})}}).fail(function(t){try{var r=JSON.parse(t.responseText);0==r.success&&n.alert(e("Debugger Error"),r.errormsg)}catch(e){}})},Continue:function(a){var i=this;if(i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1),_.DirectDebug.direct_execution_completed&&_.DirectDebug.direct_execution_completed==_.DirectDebug.polling_timeout_idle)i.Restart(a);else{var o=t("debugger.execute_query",{trans_id:a,query_type:"continue"});r.ajax({url:o,method:"GET"}).done(function(t){t.data.status?i.poll_result(a):n.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))})}},Step_over:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:a,query_type:"step_over"});r.ajax({url:o,method:"GET"}).done(function(t){t.data.status?i.poll_result(a):n.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))})},Step_into:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:a,query_type:"step_into"});r.ajax({url:o,method:"GET"}).done(function(t){t.data.status?i.poll_result(a):n.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))})},Stop:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:a,query_type:"abort_target"});r.ajax({url:o,method:"GET"}).done(function(t){t.data.status?(i.setActiveLine(-1),_.DirectDebug.direct_execution_completed=!0,_.DirectDebug.is_user_aborted_debugging=!0,_.DirectDebug.is_polling_required=!1,i.enable("continue",!1),n.success(t.info,3)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))})},toggle_breakpoint:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=_.DirectDebug.editor.lineInfo(i.active_line_no),s="";s=void 0==o.gutterMarkers?t("debugger.set_breakpoint",{trans_id:a,line_no:i.active_line_no+1,set_type:"1"}):t("debugger.set_breakpoint",{trans_id:a,line_no:i.active_line_no+1,set_type:"0"}),r.ajax({url:s,method:"GET"}).done(function(t){if(t.data.status){void 0!=_.DirectDebug.editor.lineInfo(i.active_line_no).gutterMarkers?_.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",null):_.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}()),i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0),i.enable("continue",!0)}else"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while toggling breakpoint."))}).fail(function(){n.alert(e("Debugger Error"),e("Error while toggling breakpoint."))})},clear_all_breakpoint:function(a){var i=this,o=i.GetBreakpointInformation(a);if(1!=o.length||-1!=o[0].linenumber){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);for(var s=new Array,l=0;l<o.length;l++)-1!=o[l].linenumber&&s.push(o[l].linenumber);var d=t("debugger.clear_all_breakpoint",{trans_id:a});r.ajax({url:d,method:"POST",data:{breakpoint_list:s.join()}}).done(function(e){if(e.data.status)for(var t=0;t<s.length;t++){var r=_.DirectDebug.editor.lineInfo(s[t]-1);r&&void 0!=r.gutterMarkers&&_.DirectDebug.editor.setGutterMarker(s[t]-1,"breakpoints",null)}i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0),i.enable("continue",!0)}).fail(function(){n.alert(e("Debugger Error"),e("Error while clearing all breakpoint."))})}},AddStackInformation:function(t){var r=this;r.stack_grid&&(r.stack_grid.remove(),r.stack_grid=null);for(var a=s.Model.extend({defaults:{frame_id:0,name:void 0,value:void 0,line_no:void 0}}),n=s.Collection.extend({model:a}),i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",editable:!1,cell:"string"},{name:"line_no",label:e("Line No."),type:"text",editable:!1,cell:"string"}],o=[],d=0;d<t.length;d++)o.push({frame_id:d,name:t[d].targetname,value:t[d].args,line_no:t[d].linenumber});var u=this.stackColl=new n(o);this.stackColl.on("backgrid:row:selected",r.select_frame,r);var c=this.stack_grid=new l.Grid({emptyText:"No data found",columns:i,row:l.Row.extend({events:{click:"rowClick"},rowClick:function(){r.frame_id=this.model.get("frame_id"),this.model.trigger("backgrid:row:selected",this),r.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:u,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});c.render(),_.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(c.el)},AddResults:function(e,t){var r=this;r.result_grid&&(r.result_grid.remove(),r.result_grid=null);var n=s.Model.extend({defaults:{name:void 0}}),i=s.Collection.extend({model:n}),o=[];a.size(e)&&a.each(e,function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,o.push(t)});var d=this.result_grid=new l.Grid({emptyText:"No data found",columns:o,collection:new i(t),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});d.render(),_.DirectDebug.results_panel.$container.find(".debug_results").append(d.el)},AddLocalVariables:function(t){var r=this;r.variable_grid&&(r.variable_grid.remove(),r.variable_grid=null);var a=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),n=s.Collection.extend({model:a});n.prototype.on("change",r.deposit_parameter_value,r);var i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var d=0;d<t.length;d++)"L"==t[d].varclass&&o.push({name:t[d].name,type:t[d].dtype,value:t[d].value});var u=this.variable_grid=new l.Grid({emptyText:"No data found",columns:i,collection:new n(o),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});u.collection.on("backgrid:edited",function(e,t,r){p.setFocusToDebuggerEditor(_.DirectDebug.editor,r)}),u.render(),_.DirectDebug.local_variables_panel.$container.find(".local_variables").append(u.el)},AddParameters:function(t){var r=this;r.param_grid&&(r.param_grid.remove(),r.param_grid=null);var a=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),n=r.ParametersCollection=s.Collection.extend({model:a});n.prototype.on("change",r.deposit_parameter_value,r);var i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var d=0;d<t.length;d++)"A"==t[d].varclass&&o.push({name:t[d].name,type:t[d].dtype,value:t[d].value});var u=this.param_grid=new l.Grid({emptyText:"No data found",columns:i,collection:new n(o),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});u.collection.on("backgrid:edited",function(e,t,r){p.setFocusToDebuggerEditor(_.DirectDebug.editor,r)}),u.render(),_.DirectDebug.parameters_panel.$container.find(".parameters").append(u.el)},deposit_parameter_value:function(a){var i=this,o=[];o.push({name:a.get("name"),type:a.get("type"),value:a.get("value")});var s=t("debugger.deposit_value",{trans_id:_.DirectDebug.trans_id});r.ajax({url:s,method:"POST",data:{data:JSON.stringify(o)}}).done(function(e){e.data.status&&(i.GetLocalVariables(_.DirectDebug.trans_id),e.data.result?n.success(e.data.info,3):n.error(e.data.info,3))}).fail(function(){n.alert(e("Debugger Error"),e("Error while depositing variable value."))})},select_frame:function(){var a=this,i=t("debugger.select_frame",{trans_id:_.DirectDebug.trans_id,frame_id:a.frame_id});r.ajax({url:i,method:"GET"}).done(function(e){e.data.status&&(_.DirectDebug.editor.setValue(e.data.result[0].src),a.UpdateBreakpoint(_.DirectDebug.trans_id),a.setActiveLine(e.data.result[0].linenumber-2),a.GetLocalVariables(_.DirectDebug.trans_id))}).fail(function(){n.alert(e("Debugger Error"),e("Error while selecting frame."))})}});var m=s.View.extend({el:".debugger_main_container",initialize:function(){h.on("pgDebugger:button:state:stop",this.enable_stop,this),h.on("pgDebugger:button:state:step_over",this.enable_step_over,this),h.on("pgDebugger:button:state:step_into",this.enable_step_into,this),h.on("pgDebugger:button:state:continue",this.enable_continue,this),h.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),h.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into",keydown:"keyAction"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){h.Stop(_.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){h.clear_all_breakpoint(_.DirectDebug.trans_id)},on_toggle_breakpoint:function(){h.toggle_breakpoint(_.DirectDebug.trans_id)},on_continue:function(){h.Continue(_.DirectDebug.trans_id)},on_step_over:function(){h.Step_over(_.DirectDebug.trans_id)},on_step_into:function(){h.Step_into(_.DirectDebug.trans_id)},keyAction:function(e){var t,r,n=this.$el,i=this;t=f.processEventDebugger(n,e,i.preferences),a.isUndefined(t)||a.isNull(t)||(r=t+1,_.DirectDebug.docker.findPanels()[r].focus())}}),v=function(){};return a.extend(v.prototype,{init:function(i,o,s){var l=this;if(a.bindAll(_.DirectDebug,"messages"),!this.initialized){var d;this.initialized=!0,this.trans_id=i,this.debug_type=o,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0,this.function_name_with_arguments=s;var u=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;this.preferences=u.get_preferences_for_module("sqleditor"),this.docker=new b("#container",{allowContextMenu:!1,allowCollapse:!1,loadingClass:"pg-sp-icon",themePath:t("static",{filename:"css"}),theme:"webcabin.overrides.css"}),this.panels=[],void 0==i||o?void 0!=i&&o?(d=t("debugger.start_listener",{trans_id:i}),r.ajax({url:d,method:"GET"}).done(function(e){e.data.status&&l.messages(i)}).fail(function(t){try{var r=JSON.parse(t.responseText);0==r.success&&n.alert(e("Debugger Error"),r.errormsg)}catch(t){n.alert(e("Debugger Error"),e("Error while starting debugging listener."))}})):this.intializePanels():(d=t("debugger.start_listener",{trans_id:i}),r.ajax({url:d,method:"GET"}).done(function(e){e.data.status&&(l.intializePanels(),h.poll_result(i))}).fail(function(t){try{var r=JSON.parse(t.responseText);0==r.success&&n.alert(e("Debugger Error"),r.errormsg)}catch(t){n.alert(e("Debugger Error"),e("Error while starting debugging listener."))}}))}},messages:function(a){var i=this,o=t("debugger.messages",{trans_id:a});r.ajax({url:o,method:"GET"}).done(function(t){"Success"===t.data.status?(i.intializePanels(),h.start_execution(a,t.data.result)):"Busy"===t.data.status?i.messages(a):"NotConnected"===t.data.status&&n.alert(e("Not connected to server or connection with the server has been closed."),t.data.result)}).fail(function(){n.alert(e("Debugger Error"),e("Error while fetching messages information."))})},onBreakPoint:function(e,t,r){var a=this;if("breakpoints"==r&&!_.DirectDebug.polling_timeout_idle){var n=e.lineInfo(t);void 0==n.gutterMarkers?h.set_breakpoint(a.trans_id,t+1,1):void 0==n.gutterMarkers.breakpoints?h.set_breakpoint(a.trans_id,t+1,1):h.set_breakpoint(a.trans_id,t+1,0);var i=n.gutterMarkers;void 0!=i&&void 0==n.gutterMarkers.breakpoints&&(i=n.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",i?null:function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}},intializePanels:function(){var t=this;this.registerPanel("code",t.function_name_with_arguments,"100%","50%",function(){var r=new i.Browser.Panel({name:"parameters",title:e("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters" tabindex="0"></div>'}),a=new i.Browser.Panel({name:"local_variables",title:e("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables" tabindex="0"></div>'}),n=new i.Browser.Panel({name:"messages",title:e("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="messages" class="messages" tabindex="0"></div>'}),o=new i.Browser.Panel({name:"results",title:e("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results" tabindex="0"></div>'}),s=new i.Browser.Panel({name:"stack_pane",title:e("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane" tabindex="0"></div>'});r.load(t.docker),a.load(t.docker),n.load(t.docker),o.load(t.docker),s.load(t.docker)}),t.code_editor_panel=t.docker.addPanel("code",b.DOCK.TOP),t.parameters_panel=t.docker.addPanel("parameters",b.DOCK.BOTTOM,t.code_editor_panel),t.local_variables_panel=t.docker.addPanel("local_variables",b.DOCK.STACKED,t.parameters_panel,{tabOrientation:b.TAB.TOP}),t.messages_panel=t.docker.addPanel("messages",b.DOCK.STACKED,t.parameters_panel),t.results_panel=t.docker.addPanel("results",b.DOCK.STACKED,t.parameters_panel),t.stack_pane_panel=t.docker.addPanel("stack_pane",b.DOCK.STACKED,t.parameters_panel);var a=r('<div id="stack_editor_pane" class="pg-panel-content info"></div>'),n=r('<textarea id="debugger-editor-textarea"></textarea>').appendTo(a);t.code_editor_panel.layout().addItem(a),t.editor=g.fromTextArea(n.get(0),{tabindex:-1,lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:{rangeFinder:g.fold.combine(g.pgadminBeginRangeFinder,g.pgadminIfRangeFinder,g.pgadminLoopRangeFinder,g.pgadminCaseRangeFinder)},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:i.Browser.editor_shortcut_keys,indentWithTabs:i.Browser.editor_options.indent_with_tabs,indentUnit:i.Browser.editor_options.tabSize,tabSize:i.Browser.editor_options.tabSize,lineWrapping:i.Browser.editor_options.wrapCode,autoCloseBrackets:i.Browser.editor_options.insert_pair_brackets,matchBrackets:i.Browser.editor_options.brace_matching}),g.on(t.editor,"keydown",function(e,t){27==t.keyCode&&document.activeElement.blur()});var s=function(){t.docker.finishLoading(100),t.docker.off(b.EVENT.LOADED),t.editor.on("gutterClick",t.onBreakPoint.bind(t),t),t.docker.$container&&t.docker.$container.parent().focus();var e=setInterval(function(){try{if((window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser).preference_version()>0&&(clearInterval(e),t.reflectPreferences(),t.preferences.debugger_new_browser_tab))var r=setInterval(function(){window.opener&&window.opener.pgAdmin?t.reflectPreferences():clearInterval(r)},1e3)}catch(t){throw clearInterval(e),t}},0)};t.docker.startLoading(e("Loading...")),t.docker.on(b.EVENT.LOADED,s),this.toolbarView=new m,o.onPreferencesChange("debugger",function(){t.reflectPreferences()})},reflectPreferences:function(){var e=this,t=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;e.preferences=t.get_preferences_for_module("debugger"),e.toolbarView.preferences=e.preferences,e.toolbarView.$el.find("#btn-step-into").attr("title",f.shortcut_accesskey_title("Step into",e.preferences.btn_step_into)).attr("accesskey",f.shortcut_key(e.preferences.btn_step_into)),e.toolbarView.$el.find("#btn-step-over").attr("title",f.shortcut_accesskey_title("Step over",e.preferences.btn_step_over)).attr("accesskey",f.shortcut_key(e.preferences.btn_step_over)),e.toolbarView.$el.find("#btn-continue").attr("title",f.shortcut_accesskey_title("Continue/Start",e.preferences.btn_start)).attr("accesskey",f.shortcut_key(e.preferences.btn_start)),e.toolbarView.$el.find("#btn-toggle-breakpoint").attr("title",f.shortcut_accesskey_title("Toggle breakpoint",e.preferences.btn_toggle_breakpoint)).attr("accesskey",f.shortcut_key(e.preferences.btn_toggle_breakpoint)),e.toolbarView.$el.find("#btn-clear-breakpoint").attr("title",f.shortcut_accesskey_title("Clear all breakpoints",e.preferences.btn_clear_breakpoints)).attr("accesskey",f.shortcut_key(e.preferences.btn_clear_breakpoints)),e.toolbarView.$el.find("#btn-stop").attr("title",f.shortcut_accesskey_title("Stop",e.preferences.btn_stop)).attr("accesskey",f.shortcut_key(e.preferences.btn_stop))},registerPanel:function(e,t,a,n,i){var o=this;this.docker.registerPanelType(e,{title:t,isPrivate:!0,onCreate:function(s){o.panels[e]=s,s.initSize(a,n),t?s.title(t):s.title(!1),s.closeable(!1),s.layout().addItem(r('<div tabindex="0">',{class:"pg-debugger-panel"})),i&&i.apply(o,[s])}})}}),_.DirectDebug=new v,_.DirectDebug.jquery=r,_.DirectDebug}.apply(t,a))&&(e.exports=n)},18:function(e,t,r){"use strict";function a(e){var t="";return e.alt&&(t+="alt+"),e.shift&&(t+="shift+"),e.control&&(t+="ctrl+"),t+=e.key.char.toLowerCase()}function n(e){0!=e.length&&setTimeout(function(){var t=e.find("button.fa-plus:first");0==t.length&&(t=e.find(".pgadmin-controls:first input:enabled,.CodeMirror-scroll")),t.length>0?t[0].focus():e[0].focus()},200)}function i(e){var t=e||new Date;return parseInt(t.getTime()/1e3)}function o(e){var t=function e(t,r){return 0==t?r:e(r%t,t)},r=e.length;if(r<=2)return t(e[0],e[1]);for(var a=e[0],n=1;n<r;n++)a=t(e[n],a);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.isString=t.isFunction=t.isValidData=void 0,t.parseShortcutValue=a,t.findAndSetFocus=n,t.getEpoch=i,t.getGCD=o;var s=r(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),d=function(e){return!l.default.isUndefined(e)&&!l.default.isNull(e)},u=function(e){return l.default.isFunction(e)},c=function(e){return l.default.isString(e)};t.isValidData=d,t.isFunction=u,t.isString=c},2:function(e,t,r){"use strict";var a,n;a=[r(49)],void 0!==(n=function(e){return function(t,r){var a,n=e[t]?e[t]:t,i=/([^%]*)%\(([^\)]+)\)s(.*)/,o=n;do{a=!1,o=o.replace(i,function(e,t,n,i){return a=!0,t+r[n]+i})}while(a);return o}}.apply(t,a))&&(e.exports=n)},23:function(e,t,r){var a,n;!function(i,o){a=[r(1),r(0),r(10)],void 0!==(n=function(e,t,r){return o(i,e,t,r)}.apply(t,a))&&(e.exports=n)}(this,function(e,t,r,a){Backform=e.Backform={formClassName:"backform form-inline",groupClassName:"form-group row",controlLabelClassName:"col-sm-2 col-form-label",controlContainerClassName:"col-sm-10",controlsClassName:"col-sm-8",controlClassName:"form-control",controlFormInlineClassName:"form-inline",helpClassName:"form-text",errorClassName:"has-error",helpMessageClassName:"form-text text-muted",hiddenClassName:"d-none",requiredInputClassName:void 0,resolveNameToClass:function(e,r){if(t.isString(e)){var a=t.map(e.split("-"),function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("")+r,n=Backform[a];if(t.isUndefined(n))throw new ReferenceError("Class '"+a+"' not found");return n}return e}};var n=(Backform.Form=a.View.extend({fields:void 0,errorModel:void 0,tagName:"form",className:function(){return Backform.formClassName},initialize:function(e){e.fields instanceof a.Collection||(e.fields=new s(e.fields||this.fields)),this.fields=e.fields,this.model.errorModel=e.errorModel||this.model.errorModel||new a.Model,this.controls=[]},cleanup:function(){t.each(this.controls,function(e){e.remove()}),this.controls.length=0},remove:function(){this.cleanup(),a.View.prototype.remove.apply(this,arguments)},render:function(){this.cleanup(),this.$el.empty();var e=this.$el,t=this.model,r=this.controls;return this.fields.each(function(a){var n=new(a.get("control"))({field:a,model:t});e.append(n.render().$el),r.push(n)}),this}}),Backform.ControlFormatter=function(){});t.extend(n.prototype,{fromRaw:function(e,t){return e},toRaw:function(e,t){return e}});var i=Backform.JSONFormatter=function(){};t.extend(i.prototype,{fromRaw:function(e,t){return JSON.stringify(e)},toRaw:function(e,t){return JSON.parse(e)}});var o=Backform.Field=a.Model.extend({defaults:{name:"",placeholder:"",disabled:!1,visible:!0,required:!1,value:void 0,control:void 0,formatter:void 0},initialize:function(e,t){var r=Backform.resolveNameToClass(this.get("control"),"Control");this.set({control:r},{silent:!0})}}),s=Backform.Fields=a.Collection.extend({model:o}),l=Backform.Control=a.View.extend({defaults:{},className:function(){return Backform.groupClassName},events:{"keydown :input":"processTab"},template:t.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <span readonly class="<%=Backform.controlClassName%>" value="<%=value%>">',"</div>"].join("\n")),initialize:function(e){this.field=e.field;var r=Backform.resolveNameToClass(this.field.get("formatter")||this.formatter,"Formatter");t.isFunction(r.fromRaw)||t.isFunction(r.toRaw)||(r=new r),this.formatter=r;var n=this.field.get("name").split("."),i=n.shift();this.listenTo(this.model,"change:"+i,this.render),this.model.errorModel instanceof a.Model&&this.listenTo(this.model.errorModel,"change:"+i,this.updateInvalid)},formatter:n,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find(".uneditable-input").text(),this.model)},onChange:function(e){var n=this.model,i=(r(e.target),this.field.get("name").split(".")),o=i.shift(),s=i.join("."),l=this.getValueFromDOM(),d={};if(this.model.errorModel instanceof a.Model)if(t.isEmpty(s))this.model.errorModel.unset(o);else{var u=this.model.errorModel.get(o);u&&(this.keyPathSetter(u,s,null),this.model.errorModel.set(o,u))}d[o]=t.isEmpty(s)?l:t.clone(n.get(o))||{},t.isEmpty(s)||this.keyPathSetter(d[o],s,l),this.stopListening(this.model,"change:"+o,this.render),n.set(d),this.listenTo(this.model,"change:"+o,this.render)},render:function(){var e=t.defaults(this.field.toJSON(),this.defaults),r=this.model.toJSON(),a=e.name.split("."),n=a.shift(),i=a.join("."),o=this.keyPathAccessor(r[n],i),s=t.extend(e,{rawValue:o,value:this.formatter.fromRaw(o,this.model),attributes:r,formatter:this.formatter}),l=function(e,r){return t.isFunction(e)?!!e(r):!!e};return t.extend(s,{disabled:l(s.disabled,this.model),visible:l(s.visible,this.model),required:l(s.required,this.model)}),this.$el.removeClass(Backform.hiddenClassName),s.visible||this.$el.addClass(Backform.hiddenClassName),Backform.requiredInputClassName&&this.$el.removeClass(Backform.requiredInputClassName),s.required&&this.$el.addClass(Backform.requiredInputClassName),this.$el.html(this.template(s)).addClass(e.name),this.updateInvalid(),this},clearInvalid:function(){return this.$el.removeClass(Backform.errorClassName).find("."+Backform.helpClassName+".error").remove(),this},updateInvalid:function(){var e=this,n=this.model.errorModel;return n instanceof a.Model?(this.clearInvalid(),this.$el.find(":input").not("button").each(function(a,i){var o=r(i).attr("name").split("."),s=(o.shift(),o.join("."),e.keyPathAccessor(n.toJSON(),r(i).attr("name")));t.isEmpty(s)||(e.$el.addClass(Backform.errorClassName),0===a&&e.$el.find("."+Backform.controlsClassName).append('<span class="'+Backform.helpClassName+' error">'+(t.isArray(s)?s.join(", "):s)+"</span>"))}),this):this},keyPathAccessor:function(e,r){var a=e;r=r.split(".");for(var n=0;n<r.length;n++){if(t.isNull(a))return null;t.isEmpty(r[n])||(t.isUndefined(a[r[n]])||(a=a[r[n]]))}return t.isObject(a)&&!t.isArray(a)?null:a},keyPathSetter:function(e,t,r){for(t=t.split(".");t.length>1;)e[t[0]]||(e[t[0]]={}),e=e[t.shift()];return e[t.shift()]=r},processTab:function(e){if(9==e.which){var t=r(e.currentTarget);setTimeout(function(){var r;r=e.shiftKey?t.prevAll(":input:visible").length?t.prevAll(":input:visible").first():t.closest(".control-group:visible").prev(".control-group:visible").find(":input:visible"):t.nextAll(":input:visible").length?t.nextAll(":input:visible").first():t.closest(".control-group:visible").next(".control-group:visible").find(":input:visible"),r.length&&r.first().focus()},0)}}}),d=(Backform.UneditableInputControl=l,Backform.HelpControl=l.extend({template:t.template(['<label class="<%=Backform.controlLabelClassName%>">&nbsp;</label>','<div class="<%=Backform.controlsClassName%>">','  <span class="<%=Backform.helpMessageClassName%> help-block"><%=label%></span>',"</div>"].join("\n"))}),Backform.SpacerControl=l.extend({template:t.template(['<div class="<%=Backform.controlsClassName%>"></div>'].join("\n"))}),Backform.TextareaControl=l.extend({defaults:{label:"",maxlength:4e3,extraClasses:[],helpMessage:null},template:t.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <textarea class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" maxlength="<%=maxlength%>" placeholder="<%-placeholder%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%>><%-value%></textarea>',"  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),events:t.extend({},l.prototype.events,{"change textarea":"onChange","focus textarea":"clearInvalid"}),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("textarea").val(),this.model)}}),Backform.SelectControl=l.extend({defaults:{label:"",options:[],extraClasses:[]},template:t.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <select class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-value%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> >',"    <% for (var i=0; i < options.length; i++) { %>","      <% var option = options[i]; %>",'      <option value="<%-formatter.fromRaw(option.value)%>" <%=option.value === rawValue ? "selected=\'selected\'" : ""%> <%=option.disabled ? "disabled=\'disabled\'" : ""%>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n")),events:t.extend({},l.prototype.events,{"change select":"onChange","focus select":"clearInvalid"}),formatter:i,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("select").val(),this.model)}})),u=(Backform.MultiSelectControl=d.extend({defaults:{label:"",options:[],extraClasses:[],height:"78px"},template:t.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlsClassName%>">','  <select multiple="multiple" class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-JSON.stringify(value)%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> style="height:<%=height%>">',"    <% for (var i=0; i < options.length; i++) { %>","      <% var option = options[i]; %>",'      <option value="<%-option.value%>" <%=value != null && _.indexOf(value, option.value) != -1 ? "selected=\'selected\'" : ""%> <%=option.disabled ? "disabled=\'disabled\'" : ""%>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n")),events:t.extend({},l.prototype.events,{"change select":"onChange","dblclick select":"onDoubleClick","focus select":"clearInvalid"}),formatter:{fromRaw:function(e,t){return e},toRaw:function(e,t){return"object"==typeof e?e:JSON.parse(e)}},onDoubleClick:function(e){this.model.trigger("doubleclick",e)}}),Backform.InputControl=l.extend({defaults:{type:"text",label:"",maxlength:255,extraClasses:[],helpMessage:null},template:t.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <input type="<%=type%>" class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" maxlength="<%=maxlength%>" value="<%-value%>" placeholder="<%-placeholder%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />',"  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),events:t.extend({},l.prototype.events,{"change input":"onChange","focus input":"clearInvalid"}),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input").val(),this.model)}})),c=Backform.BooleanControl=u.extend({defaults:{type:"checkbox",label:"",controlLabel:"&nbsp;",extraClasses:[],id:t.uniqueId("bf_")},template:t.template(['<label class="<%=Backform.controlLabelClassName%>"><%=controlLabel%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <div class="form-check">','    <input type="<%=type%>" class="form-check-input <%=extraClasses.join(\' \')%>" id="<%=id%>" name="<%=name%>" <%=value ? "checked=\'checked\'" : ""%> <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />','    <label class="form-check-label" for="<%=id%>"><%=label%></label>',"  </div>","</div>"].join("\n")),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input").is(":checked"),this.model)}});Backform.CheckboxControl=c,Backform.RadioControl=u.extend({defaults:{type:"radio",label:"",options:[],extraClasses:[],helpMessage:null},template:t.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%> d-flex">',"  <% for (var i=0; i < options.length; i++) { %>","    <% var option = options[i]; %>",'    <% var id = _.uniqueId("bf_"); %>','  <div class="form-check">','    <input type="<%=type%>" class="<%=extraClasses.join(\' \')%>" id="<%=id%>" name="<%=name%>" value="<%-formatter.fromRaw(option.value)%>" <%=rawValue == option.value ? "checked=\'checked\'" : ""%> <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />','    <label class="form-check-label" for="<%=id%>"><%-option.label%></label>',"  </div>","  <% } %>","  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),formatter:i,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input:checked").val(),this.model)},bootstrap2:function(){Backform.radioControlsClassName="controls",Backform.radioLabelClassName="radio inline"}});t.extend(Backform,{radioControlsClassName:"checkbox",radioLabelClassName:"checkbox-inline"});Backform.DatepickerControl=u.extend({defaults:{type:"text",label:"",options:{},extraClasses:[],maxlength:255,helpMessage:null},events:t.extend({},l.prototype.events,{"blur input":"onChange","change input":"onChange","changeDate input":"onChange","focus input":"clearInvalid"}),render:function(){return u.prototype.render.apply(this,arguments),this.$el.find("input").datepicker(this.field.get("options")),this}}),Backform.ButtonControl=l.extend({defaults:{type:"submit",label:"Submit",status:void 0,message:void 0,extraClasses:[]},template:t.template(['<label class="<%=Backform.controlLabelClassName%>">&nbsp;</label>','<div class="<%=Backform.controlsClassName%>">','  <button type="<%=type%>" name="<%=name%>" class="btn <%=extraClasses.join(\' \')%>" <%=disabled ? "disabled" : ""%> ><%=label%></button>','  <% var cls = ""; if (status == "error") cls = Backform.buttonStatusErrorClassName; if (status == "success") cls = Backform.buttonStatusSuccessClassname; %>','  <span class="status <%=cls%>"><%=message%></span>',"</div>"].join("\n")),initialize:function(){l.prototype.initialize.apply(this,arguments),this.listenTo(this.field,"change:status",this.render),this.listenTo(this.field,"change:message",this.render)},bootstrap2:function(){Backform.buttonStatusErrorClassName="text-error",Backform.buttonStatusSuccessClassname="text-success"}});return t.extend(Backform,{buttonStatusErrorClassName:"text-danger",buttonStatusSuccessClassname:"text-success"}),Backform})},26:function(e,t,r){"use strict";(function(e){function r(e,t){return n.call(e,t)}function a(e){var t=this.treeMenu.translateTreeNodeIdFromACITree(e),r=this.treeMenu.findNode(t);return n.call(this,r)}function n(t){var r=0,a=0,n={};do{var o=t.getData();if(o._type in this.Nodes&&this.Nodes[o._type].hasId){var s=i(o._type,a);void 0===n[s]&&(n[s]=e.extend({},o,{priority:r}),r-=1)}a+=1,t=t.hasParent()?t.parent():null}while(t);return n}function i(e,t){return"partition"===e&&t>0?"table":e}Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeNodeHierarchyFromElement=r,t.getTreeNodeHierarchyFromIdentifier=a,t.getTreeNodeHierarchy=n}).call(t,r(1))},29:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(15),n=function(e){return e&&e.__esModule?e:{default:e}}(a);r(55),r(91),r(92),r(73),r(93),r(94),r(95),r(96),r(56),r(97),r(74),r(98),r(99),r(100),r(101),r(38),r(51),t.default=n.default},3:function(e,t,r){"use strict";(function(r){var a,n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=[],void 0!==(n=function(){var e=window.pgAdmin=window.pgAdmin||{};return function(e,t,r){function a(e,t,a,i){a=a||"width";var o,l,d,f=(t.match(u)||[])[2],p="px"===f?1:c[f+"toPx"],g=/r?em/i;if(p||g.test(f)&&!i)e=p?e:"rem"===f?s:"fontSize"===a?e.parentNode||e:e,p=p||parseFloat(n(e,"fontSize")),d=parseFloat(t)*p;else{o=e.style,l=o[a];try{o[a]=t}catch(e){return 0}d=o[a]?parseFloat(n(e,a)):0,o[a]=l!==r?l:null}return d}function n(e,t){var r,o,s,l,c,f=/^top|bottom/,p=["paddingTop","paddingBottom","borderTop","borderBottom"],g=4;if(r=d?d(e)[t]:(o=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)])?o+"px":"fontSize"===t?a(e,"1em","left",1)+"px":e.currentStyle[t],"%"===(s=(r.match(u)||[])[2])&&i)if(f.test(t)){for(l=(c=e.parentNode||e).offsetHeight;g--;)l-=parseFloat(n(c,p[g]));r=parseFloat(r)/100*l+"px"}else r=a(e,r);else("auto"===r||s&&"px"!==s)&&d?r=0:s&&"px"!==s&&!d&&(r=a(e,r)+"px");return r}var i,o=t.createElement("test"),s=t.documentElement,l=t.defaultView,d=l&&l.getComputedStyle,u=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,c={},f=[1/25.4,1/2.54,1/72,1/6],p=["mm","cm","pt","pc","in","mozmm"],g=6;for(s.appendChild(o),d&&(o.style.marginTop="1%",i="1%"===d(o).marginTop);g--;)c[p[g]+"toPx"]=f[g]?f[g]*c.inToPx:a(o,"1"+p[g]);s.removeChild(o),o=r,e.toPx=a}(e,window.document),e.natural_sort=function(e,t,r){r=r||{};var a,n,o=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,d=/^0x[0-9a-f]+$/i,u=/^0/,c=function(e){return r.insensitive&&(""+e).toLowerCase()||""+e},f=c(e).replace(s,"")||"",p=c(t).replace(s,"")||"",g=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),_=parseInt(f.match(d))||1!==g.length&&f.match(l)&&Date.parse(f),h=parseInt(p.match(d))||_&&p.match(l)&&Date.parse(p)||null,m=r.desc?-1:1;if(h){if(_<h)return-1*m;if(_>h)return 1*m}for(var v=0,y=Math.max(g.length,b.length);v<y;v++){if(a=!(g[v]||"").match(u)&&parseFloat(g[v])||g[v]||0,n=!(b[v]||"").match(u)&&parseFloat(b[v])||b[v]||0,isNaN(a)!==isNaN(n))return(isNaN(a)?1:-1)*m;if((void 0===a?"undefined":i(a))!==(void 0===n?"undefined":i(n))&&(a+="",n+=""),a<n)return-1*m;if(a>n)return 1*m}return 0},e}.apply(t,a))&&(e.exports=n)}).call(t,r(3))},30:function(e,t,r){"use strict";var a,n;a=[r(0),r(2),r(4)],void 0!==(n=function(e,t,r){var a={epicRandomString:function(e){for(var t=[],r="0123456789abcdef",a=0;a<36;a++)t[a]=r.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=r.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,r=e.length,a=0;a<r;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return t},calculateColumnWidth:function(t){e("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var r=e("#pg_text").width()+23;return e("#pg_text").remove(),r},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},previousStatus:null,fetchConnectionStatus:function(n,i,o){var s=r("sqleditor.connection_status",{trans_id:n.transId});if("visible"===document.visibilityState&&"visible"===i.data("panel-visible")){var l=n;e.ajax({url:s,method:"GET"}).done(function(e){if(e&&e.data){var r=e.data.status,n=e.data.message,s=!1;switch(l.update_notifications(e.data.notifies),r){case 1:r!=a.previousStatus||o.hasClass("fa-hourglass-half")||(o.removeClass().addClass("fa fa-hourglass-half"),s=!0);break;case 2:a.previousStatus==r||o.hasClass("fa-clock-o")||(o.removeClass().addClass("fa fa-clock-o"),s=!0);break;case 3:a.previousStatus==r||o.hasClass("fa-exclamation-circle")||(o.removeClass().addClass("fa fa-exclamation-circle"),s=!0);break;case 4:a.previousStatus==r||o.hasClass("fa-exclamation-triangle")||(o.removeClass().addClass("fa fa-exclamation-triangle"),s=!0);break;default:a.previousStatus==r||o.hasClass("fa-query_tool_connected")||(o.removeClass().addClass("fa-custom fa-query-tool-connected"),s=!0)}a.previousStatus=r,s&&(i.popover("hide"),i.attr("data-content",n))}else a.previousStatus=-99,n=t("An unexpected error occurred - ensure you are logged into the application."),i.attr("data-content",n),o.hasClass("fa-query-tool-disconnected")||(i.popover("hide"),o.removeClass().addClass("fa-custom fa-query-tool-disconnected"))}).fail(function(e){a.previousStatus=-1;var r=t("Transaction status check failed.");0==e.readyState?r=t("Not connected to the server or the connection to the server has been closed."):e.responseJSON&&e.responseJSON.errormsg&&(r=e.responseJSON.errormsg),i.attr("data-content",r),o.hasClass("fa-query-tool-disconnected")||(i.popover("hide"),o.removeClass().addClass("fa-custom fa-query-tool-disconnected"))})}},updateConnectionStatusFlag:function(t){var r=e(".connection_status");r.data("panel-visible")!=t&&r.data("panel-visible",t)},calcFontSize:function(e){if(e){var t=Number(Math.round(e+"e+2")+"e-2");if(t>0)return t+"em"}return"1em"}};return a}.apply(t,a))&&(e.exports=n)},34:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(){return-1!=window.navigator.platform.search("Mac")}function i(e){return e.ctrlKey||e.altKey}function o(e){return e.altKey||e.shiftKey}function s(e){return e.ctrlKey||e.shiftKey}function l(e){return e.ctrlKey||e.altKey||e.shiftKey}function d(e){return e.altKey&&e.shiftKey&&!e.ctrlKey}function u(e){return e.ctrlKey&&e.shiftKey&&!e.altKey}function c(e){return e.ctrlKey&&e.altKey&&!e.shiftKey}function f(e){var t="";return e.key&&e.key.char&&(t=e.key.char.toUpperCase()),t}function p(e,t){var r="";return void 0===t||null===t?r:(t.alt&&(r=(0,D.default)("Alt")+"+"),t.shift&&(r+=(0,D.default)("Shift")+"+"),t.control&&(r+=(0,D.default)("Ctrl")+"+"),r+=f(t),(0,D.default)("%(title)s (%(text_representation)s)",{title:e,text_representation:r}))}function g(e,t){return(0,D.default)("%(title)s (accesskey + %(key)s)",{title:e,key:f(t)})}function b(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}function _(e,t){if(!e)return!1;var r=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==r}function h(e,t,r){var a=void 0,n=void 0,i=void 0;return this.validateShortcutKeys(r.edit_grid_values,t)?(this._stopEventPropagation(t),n=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")'),n.length&&(i=(0,w.default)(n).find("td.editable:first"),i.length&&i.trigger("click"))):this.validateShortcutKeys(r.move_next,t)?(this._stopEventPropagation(t),a=this.getInnerPanel(e,"right")):this.validateShortcutKeys(r.move_previous,t)&&(this._stopEventPropagation(t),a=this.getInnerPanel(e,"left")),a}function m(e,t){if(!e||!e.length)return!1;var r=e.find(".wcPanelTab");if(!r.length||1==r.length)return!1;var a=(0,w.default)(r).filter(".wcPanelTabActive"),n=parseInt((0,w.default)(a).attr("id")),i=r.length-1;return"left"==t?n>0&&n--:n<i&&n++,n}function v(e,t,r){if(!e.isQueryRunning()){var a=r.which||r.keyCode,n=void 0,i=e.preferences.execute_query,o=e.preferences.explain_query,s=e.preferences.explain_analyze_query,l=e.preferences.download_csv,d=e.preferences.move_next,u=e.preferences.move_previous,c=e.preferences.toggle_case;if(this.validateShortcutKeys(i,r))this._stopEventPropagation(r),t.executeQuery(e);else if(this.validateShortcutKeys(o,r))this._stopEventPropagation(r),t.explain(e);else if(this.validateShortcutKeys(s,r))this._stopEventPropagation(r),t.explainAnalyze(e);else if(this.validateShortcutKeys(l,r))this._stopEventPropagation(r),t.download(e);else if(this.validateShortcutKeys(c,r))this._stopEventPropagation(r),t.toggleCaseOfSelectedText(e);else if((this.isMac()&&r.metaKey||!this.isMac()&&r.ctrlKey)&&!r.altKey&&r.shiftKey&&a===C)this._stopEventPropagation(r),t.commentBlockCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&a===C)this._stopEventPropagation(r),t.commentLineCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&a===x)this._stopEventPropagation(r),t.uncommentLineCode(e);else if(a==N)t.focusOut(e),(0,w.default)(r.target).hasClass("dropdown-item")&&(0,w.default)(r.target).closest(".dropdown-submenu").length>0&&(0,w.default)(r.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show");else if(this.validateShortcutKeys(d,r))this._stopEventPropagation(r),n=this.getInnerPanel(e.container,"right");else if(this.validateShortcutKeys(u,r))this._stopEventPropagation(r),n=this.getInnerPanel(e.container,"left");else if(a===T||a===B){if((0,w.default)(r.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(r);var f=(0,w.default)(r.target).closest("li");for((0,w.default)(r.target).closest(".dropdown-menu").find(".show").removeClass("show"),a===T?f=f.prev():a===B&&(f=f.next());f.hasClass("dropdown-divider")||f.find(".dropdown-item").first().hasClass("disabled");)a===T?f=f.prev():a===B&&(f=f.next());f.find(".dropdown-item").trigger("focus")}}else if((a===S||a===E)&&(0,w.default)(r.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(r);var p=(0,w.default)(r.target).closest("li");if(a===E)p.hasClass("dropdown-submenu")&&(p.find(".dropdown-menu").addClass("show"),p=p.find(".dropdown-menu .dropdown-item").first().trigger("focus"));else if(a===S){var g=p.closest(".dropdown-menu");g.closest(".dropdown-submenu").length>0&&(g.removeClass("show"),p=g.closest(".dropdown-submenu"),p.find(".dropdown-item").trigger("focus"))}}return n}}var y=r(0),w=a(y),k=r(2),D=a(k),x=190,C=191,N=27,S=37,T=38,E=39,B=40;e.exports={processEventDebugger:h,processEventQueryTool:v,getInnerPanel:m,validateShortcutKeys:_,_stopEventPropagation:b,isMac:n,isKeyCtrlAlt:i,isKeyAltShift:o,isKeyCtrlShift:s,isKeyCtrlAltShift:l,isAltShiftBoth:d,isCtrlShiftBoth:u,isCtrlAltBoth:c,shortcut_key:f,shortcut_title:p,shortcut_accesskey_title:g}},38:function(e,t,r){"use strict";(function(e){var a,n,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){"object"==o(t)&&"object"==o(e)?s(r(15)):(n=[r(15)],a=s,void 0!==(i="function"==typeof a?a.apply(t,n):a)&&(e.exports=i))}(function(e){e.pgadminKeywordRangeFinder=function(t,r,a,n){for(var i,o,s=r.line,l=t.getLine(s),d=l.length;d>0;){var u=l.lastIndexOf(a,d),c=a,f=n;if(u<r.ch){if((u=l.lastIndexOf("[",d))<r.ch)break;c="[",f="]"}if(o=t.getTokenAt(e.Pos(s,u+1)).type,!/^(comment|string)/.test(o)){i=u;break}d=u-1}if(!(null==i||l.lastIndexOf(c)>i)){var p,g,b=1,_=t.lineCount();e:for(var h=s+1;h<_;++h)for(var m=t.getLine(h),v=0;;){var y=m.indexOf(c,v),w=m.indexOf(f,v);if(y<0&&(y=m.length),w<0&&(w=m.length),(v=Math.min(y,w))==m.length)break;if(t.getTokenAt(e.Pos(h,v+1)).type==o)if(v==y)++b;else if(!--b){p=h,g=v;break e}++v}if(null!=p&&p!=s+1)return{from:e.Pos(s,i+a.length),to:e.Pos(p,g)}}},e.pgadminBeginRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"BEGIN","END;")},e.pgadminIfRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"IF","END IF")},e.pgadminLoopRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"LOOP","END LOOP")},e.pgadminCaseRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"CASE","END CASE")}})}).call(t,r(28)(e))},4:function(e,t,r){"use strict";var a,n;a=[r(50)],void 0!==(n=function(e){return function(t,r){var a=e[t],n=/([<])([^:^>]*:)?([^>]+)([>])/g,i=a;return a?i=i.replace(n,function(e,t,a,n){return n in r?r[n]:e}):a}}.apply(t,a))&&(e.exports=n)},49:function(t,r){t.exports=e},50:function(e,r){e.exports=t},51:function(e,t,r){"use strict";var a=r(15);(function(e){return e&&e.__esModule?e:{default:e}})(a).default.defineExtension("centerOnLine",function(e){var t=this.getScrollInfo().clientHeight,r=this.charCoords({line:e,ch:0},"local");this.scrollTo(null,(r.top+r.bottom-t)/2)})},52:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(){return u.default.isUndefined(window.opener)||u.default.isNull(window.opener)?window.parent.pgAdmin.Browser:window.opener.pgAdmin.Browser}function i(e,t){var r=e.get_preference("browser","enable_acitree_animation").value;u.default.isUndefined(t)&&(t=e.tree),r?t.options({animateRoot:!0,unanimated:!1,show:u.default.extend(t.options().show,{duration:75}),hide:u.default.extend(t.options().hide,{duration:75}),view:u.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:u.default.extend(t.options().show,{duration:0}),hide:u.default.extend(t.options().hide,{duration:0}),view:u.default.extend(t.options().view,{duration:0})})}function o(e){(u.default.isUndefined(e)||u.default.isNull(e))&&(e=n()),e.get_preference("browser","enable_alertify_animation").value?((0,l.default)(document).find("link#alertify-no-animation").attr("disabled","disabled"),u.default.each(document.getElementsByTagName("iframe"),function(e){(0,l.default)(e.contentDocument).find("link#alertify-no-animation").attr("disabled","disabled")})):((0,l.default)(document).find("link#alertify-no-animation").removeAttr("disabled","disabled"),u.default.each(document.getElementsByTagName("iframe"),function(e){(0,l.default)(e.contentDocument).find("link#alertify-no-animation").removeAttr("disabled","disabled")}))}var s=r(0),l=a(s),d=r(1),u=a(d);e.exports={modifyAcitreeAnimation:i,modifyAlertifyAnimation:o}},57:function(e,t){e.exports=r},75:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){e.label in p&&!(u.default.findIndex(g._buttonList,{name:e.label})<0)||(g.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled),p[e.label]=e)}function i(e,t){g=e,u.default.each(b,function(e){n(e)}),u.default.each(_,function(e){n(e)}),e.on(t.EVENT.BUTTON,function(e){"name"in e&&e.name===(0,l.default)("Query Tool")?f.default.DataGrid.show_query_tool("",f.default.Browser.tree.selected()):"name"in e&&e.name===(0,l.default)("View Data")?f.default.DataGrid.show_data_grid({mnuid:3},f.default.Browser.tree.selected()):"name"in e&&e.name===(0,l.default)("Filtered Rows")&&f.default.DataGrid.show_filtered_row({mnuid:4},f.default.Browser.tree.selected())})}function o(e,t){e in p&&g.buttonEnable(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.initializeToolbar=i,t.enable=o;var s=r(2),l=a(s),d=r(1),u=a(d),c=r(3),f=a(c),p={},g=null,b=[{label:(0,l.default)("Filtered Rows"),btnClass:"fa fa-filter",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:!1},{label:(0,l.default)("View Data"),btnClass:"fa fa-table",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:!1},{label:(0,l.default)("Query Tool"),btnClass:"fa fa-bolt",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:!1}],_=[]},76:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){return null===t?e:function e(r){for(var a=0,n=r.children.length;a<n;a++){var i=e(r.children[a]);if(null!==i)return i}return r.path===t?r:null}(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidTreeNodeData=t.Tree=t.TreeNode=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(18),s=t.TreeNode=function(){function e(t,r,n,i){a(this,e),this.id=t,this.data=r,this.setParent(i),this.children=[],this.domNode=n}return i(e,[{key:"hasParent",value:function(){return null!==this.parentNode&&void 0!==this.parentNode}},{key:"parent",value:function(){return this.parentNode}},{key:"setParent",value:function(e){this.parentNode=e,this.path=this.id,null!==e&&void 0!==e&&void 0!==e.path&&(this.path=e.path+"."+this.id)}},{key:"getData",value:function(){if(void 0!==this.data)return null===this.data?null:Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function(){return this.domNode}},{key:"reload",value:function(e){var t=this;this.unload(e),e.aciTreeApi.setInode(this.domNode),e.aciTreeApi.deselect(this.domNode),setTimeout(function(){e.selectNode(t.domNode)},0)}},{key:"unload",value:function(e){this.children=[],e.aciTreeApi.unload(this.domNode)}},{key:"ancestorNode",value:function(e){for(var t=this;t.hasParent();)if(t=t.parent(),e(t))return t;return null}},{key:"anyFamilyMember",value:function(e){return!!e(this)||null!==this.ancestorNode(e)}},{key:"anyParent",value:function(e){return null!==this.ancestorNode(e)}}]),e}(),l=(t.Tree=function(){function e(){a(this,e),this.rootNode=new s(void 0,{}),this.aciTreeApi=void 0}return i(e,[{key:"addNewNode",value:function(e,t,r,a){var n=this.findNode(a);return this.createOrUpdateNode(e,t,n,r)}},{key:"findNode",value:function(e){return null===e||void 0===e||0===e.length?this.rootNode:n(this.rootNode,e.join("."))}},{key:"findNodeByDomElement",value:function(e){var t=this.translateTreeNodeIdFromACITree(e);if(t&&t[0])return this.findNode(t)}},{key:"selected",value:function(){return this.aciTreeApi.selected()}},{key:"selectNode",value:function(e){this.aciTreeApi.select(e)}},{key:"createOrUpdateNode",value:function(e,t,r,a){var n=[e];null!==r&&void 0!==r&&(n=[r.path,e]);var i=this.findNode(n);if(null!==i)return i.data=t,i;var o=new s(e,t,a,r);return r===this.rootNode&&(o.parentNode=null),r.children.push(o),o}},{key:"register",value:function(e){e.on("acitree",function(e,t,r,a){if(t.isItem(r)&&"added"===a){var n=t.getId(r),i=t.itemData(r),o=this.translateTreeNodeIdFromACITree(t.parent(r));this.addNewNode(n,i,r,o)}}.bind(this)),this.aciTreeApi=e.aciTree("api")}},{key:"translateTreeNodeIdFromACITree",value:function(e){for(var t=e,r=[];null!==t&&void 0!==t&&t.length>0&&(r.unshift(this.aciTreeApi.getId(t)),this.aciTreeApi.hasParent(t));)t=this.aciTreeApi.parent(t);return r}}]),e}(),o.isValidData);t.isValidTreeNodeData=l},77:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(0),s=a(o),l=r(58),d=a(l),u=r(18),c=function(){function e(t,r,a){n(this,e),this.dialogContainer=t,this.tabSwitching=!1,this.tabs=this.dialogContainer.find(".nav-tabs"),this.tabs.length>0&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,u.parseShortcutValue)(r),this.dialogTabForward=(0,u.parseShortcutValue)(a),(0,d.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,d.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}return i(e,[{key:"onKeyboardEvent",value:function(e,t){var r=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first"),a=this.isActivePaneHasChildTabs(r);if(!this.tabSwitching)if(this.tabSwitching=!0,a){var n=this.navigate(t,a.childTab,a.childTabPane);n||this.navigate(t,this.tabs,r)}else this.navigate(t,this.tabs,r)}},{key:"isActivePaneHasChildTabs",value:function(e){var t,r=e.find(".nav-tabs:first");return r.length>0?(t=e.find(".tab-content:first > .tab-pane.active:first"),{childTab:r,childTabPane:t}):null}},{key:"navigate",value:function(e,t,r){return e==this.dialogTabBackward?this.navigateBackward(t,r):e==this.dialogTabForward&&this.navigateForward(t,r)}},{key:"navigateBackward",value:function(e,t){var r,a,n=this,i=(0,s.default)(e).find("li").has("a.active").prev("li");return i.length>0?(i.find("a").tab("show"),r=t.prev(),a=r.find(".tab-content:first > .tab-pane.active:first"),a.length>0?(0,u.findAndSetFocus)(a):(0,u.findAndSetFocus)(r),setTimeout(function(){n.tabSwitching=!1},200),!0):(this.tabSwitching=!1,!1)}},{key:"navigateForward",value:function(e,t){var r,a,n=this,i=(0,s.default)(e).find("li").has("a.active").next("li");return i.length>0?(i.find("a").tab("show"),r=t.next(),a=r.find(".tab-content:first > .tab-pane.active:first"),a.length>0?(0,u.findAndSetFocus)(a):(0,u.findAndSetFocus)(r),setTimeout(function(){n.tabSwitching=!1},200),!0):(this.tabSwitching=!1,!1)}},{key:"detach",value:function(){(0,d.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward),(0,d.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}]),e}();e.exports={dialogTabNavigator:c}}},[167]).default});